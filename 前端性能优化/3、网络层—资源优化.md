# HTTP 请求优化

在**开篇**中提到涉及网络层的有：

- DNS 解析
- TCP 连接
- HTTP 请求/响应

对于 DNS 解析和 TCP 连接两个步骤，前端可以做的努力相对有限，下面直接从 HTTP 开始：

**HTTP 优化有两个大的方向：**

## 1、减少请求次数

### 1.1 资源合并

#### 雪碧图

雪碧图是将多个小图标合并在一张图中，从而减少图片资源请求数量的一种优化方案。

### 1.2 图片 Base64

Base64 是一种用于传输 8Bit 字节码的编码方式，通过对图片进行 Base64 编码，我们可以直接将编码结果写入 HTML 或者写入 CSS，从而减少 HTTP 请求的次数。

## 2、减少单次请求所花费的时间

### 2.1 压缩代码：

Gzip 压缩，UglifyJsPlugin 压缩，Tree-Shaking

#### Tree-Shaking

从 webpack2 开始，webpack 原生支持了 ES6 的模块系统，并基于此推出了 `Tree-Shaking`。  
基于 `import/export` 语法，`Tree-Shaking` 可以在编译的过程中获悉哪些模块并没有真正被使用，这些没用的代码，在最后打包的时候会被去除。  
`Tree-Shaking` 的针对性很强，它更适合用来处理模块级别的冗余代码。  
至于粒度更细的冗余代码的去除，往往会被整合进 JS 或 CSS 的压缩或分离过程中。比如：`UglifyJsPlugin` 等

### 2.2 抽离公共代码：CommonsChunkPlugin

webpack 的 CommonsChunkPlugin 插件：通过将公共模块拆出来，最终合成的文件能够在最开始的时候加载一次，以便存到缓存中供后续使用。这样后续新加载的页面也使用到公共模块时可以直接从缓存中读取，反之，新的文件本身也要包含所需要的公共模块的代码，体积变大。因此使用 CommonsChunkPlugin，对于新页面来说可以减小体积，请求时也就减少请求的时间了。
