(window.webpackJsonp=window.webpackJsonp||[]).push([[76],{440:function(t,s,a){"use strict";a.r(s);var n=a(45),e=Object(n.a)({},(function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[a("h1",{attrs:{id:"tree-shaking"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#tree-shaking"}},[t._v("#")]),t._v(" Tree-Shaking")]),t._v(" "),a("p",[t._v("这是 webpack4 文档中 "),a("code",[t._v("tree-shaking")]),t._v(" 部分的介绍："),a("a",{attrs:{href:"https://v4.webpack.js.org/guides/tree-shaking/",target:"_blank",rel:"noopener noreferrer"}},[t._v("https://v4.webpack.js.org/guides/tree-shaking/"),a("OutboundLink")],1),t._v("，你可以先快速过一遍来了解一下什么是 "),a("code",[t._v("tree-shaking")]),t._v("。")]),t._v(" "),a("h2",{attrs:{id:"什么是-tree-shaking"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#什么是-tree-shaking"}},[t._v("#")]),t._v(" 什么是 tree-shaking")]),t._v(" "),a("p",[a("code",[t._v("tree-shaking")]),t._v(" 是一个术语，通常指在 JavaScript 上下文中移除未使用的代码(dead-code)。它依赖于 ES2015 模块语法中的静态结构特性，例如 "),a("code",[t._v("import")]),t._v(" 和 "),a("code",[t._v("export")]),t._v("。这个术语和概念兴起于 ES2015 模块打包工具 "),a("code",[t._v("rollup")]),t._v("。"),a("br"),t._v("\nwebpack 2 版本提供了对 ES2015 模块的内置支持，以及检测未使用的导出模块的能力。新的 webpack 4 版本扩展了这个功能，通过 "),a("code",[t._v("package.json")]),t._v(" 的 "),a("code",[t._v('"sideEffects"')]),t._v(" 属性作为标记，向编译器提供了提示，表示项目中的哪些文件是“纯”的，因此在未使用时可以安全删除它们。"),a("br"),t._v("\nwebpack 打包过程中，对 ES2015 模块代码能够进行 "),a("code",[t._v("tree-shaking")]),t._v("，减少无用代码缩小项目体积大小，起到优化项目的作用。")]),t._v(" "),a("h2",{attrs:{id:"如何使用"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#如何使用"}},[t._v("#")]),t._v(" 如何使用")]),t._v(" "),a("h3",{attrs:{id:"_1、使用-es2015-模块语法-即-import-和-export-及其原理"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1、使用-es2015-模块语法-即-import-和-export-及其原理"}},[t._v("#")]),t._v(" 1、使用 ES2015 模块语法(即 import 和 export)及其原理")]),t._v(" "),a("p",[t._v("项目中的模块代码需要使用 ES2015(ES6) 的模块语法(即 "),a("code",[t._v("import")]),t._v(" 和 "),a("code",[t._v("export")]),t._v(")，这是 "),a("code",[t._v("tree-shaking")]),t._v(" 的基础。"),a("br"),t._v("\nES6 模块的设计思想是尽量的静态化，使得编译时就能确定模块的依赖关系，以及输入和输出的变量。CommonJS 和 AMD 模块，都只能在运行时确定这些东西。这也是为什么 rollup 和 webpack 都要用 ES6 模块语法才能 "),a("code",[t._v("tree-shaking")]),t._v("。"),a("br"),t._v("\nES6 模块依赖关系是确定的，和运行时的状态无关，可以进行可靠的静态分析，这就是 "),a("code",[t._v("tree-shaking")]),t._v(" 的基础。"),a("br"),t._v("\n所谓静态分析就是不执行代码，从字面量上对代码进行分析，ES6 之前的模块化，比如我们可以动态 "),a("code",[t._v("require")]),t._v(" 一个模块，只有执行后才知道引用的什么模块，这个就不能通过静态分析去做优化。")]),t._v(" "),a("blockquote",[a("p",[t._v("你可以阅读知乎的这个问题下的回答来了解更多："),a("br"),t._v(" "),a("a",{attrs:{href:"https://www.zhihu.com/question/41922432",target:"_blank",rel:"noopener noreferrer"}},[t._v("如何评价 Webpack 2 新引入的 Tree-shaking 代码优化技术？：https://www.zhihu.com/question/41922432"),a("OutboundLink")],1),a("br"),t._v("\n以及百度外卖大前端团队在掘金的文章 —— "),a("a",{attrs:{href:"https://juejin.cn/post/6844903544756109319",target:"_blank",rel:"noopener noreferrer"}},[t._v("Tree-Shaking 性能优化实践 - 原理篇：https://juejin.cn/post/6844903544756109319"),a("OutboundLink")],1)])]),t._v(" "),a("h3",{attrs:{id:"_2、注意其他编译工具"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2、注意其他编译工具"}},[t._v("#")]),t._v(" 2、注意其他编译工具")]),t._v(" "),a("p",[t._v("确保没有其他的编译工具把你的 ES6 模块转为 CommonJs 模块模块（这是流行的 "),a("code",[t._v("Babel preset @babel/preset-env")]),t._v(" 的默认行为）。就像第 1 点中说的，对于 CommonJs 模块，"),a("code",[t._v("tree-shaking")]),t._v(" 不起作用。"),a("br"),t._v("\n但是 babel 对于我们开发项目来说又是必须的，我们应该如何处理呢？"),a("br"),t._v("\n如果我们先进行 tree-shaking 打包，最后再编译 bundle 文件不就好了嘛。这确实是一个方案，然而可惜的是：这在处理项目自身资源代码时是可行的，处理外部依赖 npm 包就不行了。因为人家为了让工具包具有通用性、兼容性，大多是经过 babel 编译的。而最占容量的地方往往就是这些外部依赖包，依赖包没法 tree-shaking，依然存在未优化的代码。如此种种此消彼长的问题还有不少，你可以看一下这篇文章"),a("a",{attrs:{href:"https://github.com/wuomzfx/tree-shaking-test",target:"_blank",rel:"noopener noreferrer"}},[t._v("你的 Tree-Shaking 并没什么卵用：https://github.com/wuomzfx/tree-shaking-test"),a("OutboundLink")],1)]),t._v(" "),a("p",[t._v("上面说了一些因为模块语法和编译工具的产生的问题，在 "),a("strong",[t._v("webpack4")]),t._v("，你可以直接使用 "),a("code",[t._v("mode")]),t._v(" 选项，设为 "),a("code",[t._v("production")]),t._v("，则 webpack 会默认进行包括 "),a("code",[t._v("tree-shaking")]),t._v(" 在内的优化和代码压缩，且能很好的解决像 "),a("code",[t._v("babel")]),t._v(" 这样的编译工具带来的副作用。")]),t._v(" "),a("h3",{attrs:{id:"_3、在项目-package-json-文件中-添加一个-sideeffects-入口。"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_3、在项目-package-json-文件中-添加一个-sideeffects-入口。"}},[t._v("#")]),t._v(' 3、在项目 package.json 文件中，添加一个 "sideEffects" 入口。')]),t._v(" "),a("p",[t._v("在 webpack4 中扩展了对模块的检测能力，通过 "),a("code",[t._v("package.json")]),t._v(" 的 "),a("code",[t._v('"sideEffects"')]),t._v(' 属性作为标记，向 compiler 提供提示，表明项目中的哪些文件是 "pure(纯的 ES2015 模块)"，因此在未使用时它可以安全地被删除。')]),t._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// sideEffects 接受 2 种类型的值")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"name"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"your-project"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"sideEffects"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("false")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 所有代码都不包含副作用")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"sideEffects"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"./src/some-side-effectful-file.js"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 该文件代码包含副作用，未使用到的代码不会被删除")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"*.css"')]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),a("blockquote",[a("p",[a("a",{attrs:{href:"https://zhuanlan.zhihu.com/p/40052192",target:"_blank",rel:"noopener noreferrer"}},[t._v("Webpack 中的 sideEffects 到底该怎么用？：https://zhuanlan.zhihu.com/p/40052192"),a("OutboundLink")],1),a("br"),t._v(" "),a("a",{attrs:{href:"https://zhuanlan.zhihu.com/p/44053307",target:"_blank",rel:"noopener noreferrer"}},[t._v("webpack sideEffect 观察：https://zhuanlan.zhihu.com/p/44053307"),a("OutboundLink")],1)])]),t._v(" "),a("h3",{attrs:{id:"_4、引入一个能够删除未引用代码-dead-code-的压缩工具-minifier-例如-uglifyjs-webpack-plugin-。"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_4、引入一个能够删除未引用代码-dead-code-的压缩工具-minifier-例如-uglifyjs-webpack-plugin-。"}},[t._v("#")]),t._v(" 4、引入一个能够删除未引用代码(dead code)的压缩工具(minifier)（例如 uglifyjs-webpack-plugin）。")]),t._v(" "),a("p",[a("strong",[t._v("webpack 的 tree-shaking 只是标记出了模块中哪些代码使用到了，哪些没有使用到，删除这些没有使用到的代码（dead-code）还需要压缩工具（比如 uglifyjs-webpack-plugin）来实现。")]),a("br"),t._v("\n如果不做任何处理，"),a("code",[t._v("tree-shaking")]),t._v(" 并不能非常显著地减小产物体积，原因简而言之，就是 "),a("code",[t._v("tree-shaking")]),t._v(" 过程中， webpack 无法判断一个模块包是否有副作用，因此即使引入了它但没有使用，webpack 也只能保守地选择保留其代码。")]),t._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// webpack@4.44.2")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// webpack.config.js")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" path "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("require")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'path'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" UglifyJsPlugin "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("require")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'uglifyjs-webpack-plugin'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\nmodule"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("exports "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  entry"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'./src/index.js'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  output"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    filename"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'bundle.js'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    path"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" path"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("resolve")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("__dirname"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'dist'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  mode"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'none'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 退出所有默认优化选项，改用optimization手动设置")]),t._v("\n  optimization"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    usedExports"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("true")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 标记未使用（unused）的代码,让UglifyJs删除它")]),t._v("\n    minimize"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("true")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 是否压缩")]),t._v("\n    minimizer"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("UglifyJsPlugin")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 压缩工具")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),a("h3",{attrs:{id:"_5、webpack4-的-production-模式"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_5、webpack4-的-production-模式"}},[t._v("#")]),t._v(" 5、webpack4 的 production 模式")]),t._v(" "),a("p",[t._v("webpack4 提供了模式配置(mode)选项告诉 webpack 使用相应的内置优化。"),a("code",[t._v("mode")]),t._v(" 选项的默认值为 "),a("code",[t._v("production")]),t._v("。")]),t._v(" "),a("table",[a("thead",[a("tr",[a("th",[t._v("选项")]),t._v(" "),a("th",[t._v("描述")])])]),t._v(" "),a("tbody",[a("tr",[a("td",[t._v("development")]),t._v(" "),a("td",[t._v("使用 "),a("code",[t._v("webpack.DefinePlugin")]),t._v(" 设置 "),a("code",[t._v("process.env.NODE_ENV")]),t._v("为 "),a("code",[t._v("development")]),t._v("。启用 "),a("code",[t._v("NamedChunksPlugin")]),t._v(" 和 "),a("code",[t._v("NamedModulesPlugin")])])]),t._v(" "),a("tr",[a("td",[t._v("production")]),t._v(" "),a("td",[t._v("使用 "),a("code",[t._v("webpack.DefinePlugin")]),t._v(" 设置 "),a("code",[t._v("process.env.NODE_ENV")]),t._v("为 "),a("code",[t._v("production")]),t._v("。启用 "),a("code",[t._v("FlagDependencyUsagePlugin")]),t._v(","),a("code",[t._v("FlagIncludedChunksPlugin")]),t._v(" , "),a("code",[t._v("ModuleConcatenationPlugin")]),t._v(" , "),a("code",[t._v("NoEmitOnErrorsPlugin")]),t._v(" , "),a("code",[t._v("OccurrenceOrderPlugin")]),t._v(" , "),a("code",[t._v("SideEffectsFlagPlugin")]),t._v(" and "),a("code",[t._v("TerserPlugin")]),t._v(" 。")])]),t._v(" "),a("tr",[a("td",[t._v("none")]),t._v(" "),a("td",[t._v("退出所有默认的优化选项")])])])]),t._v(" "),a("p",[t._v("webpack4 可以通过将 "),a("code",[t._v('"mode"')]),t._v(" 选项配置为 "),a("code",[t._v('"production"')]),t._v("，来启用默认的配置选项进行代码压缩（删除 dead code，删除空格，删除注释等），消除副作用等优化。同时仍然可以配置 "),a("code",[t._v("Optimization")]),t._v(" 属性来手动调整和覆盖默认配置。\n如果没有选择 "),a("code",[t._v("production")]),t._v(" 模式，则需要手动配置优化，引入压缩工具删除无用代码，消除副作用等。")]),t._v(" "),a("h2",{attrs:{id:"实验一下-tree-shaking"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#实验一下-tree-shaking"}},[t._v("#")]),t._v(" 实验一下 tree-shaking")]),t._v(" "),a("p",[t._v("由于 webpack2-4 经历了很多版本，不同版本的具体用法、配置等都有不少变化，下面只给出 "),a("code",[t._v("webpack@4.44.2")]),t._v(" 版本的配置和相关伪代码示例")]),t._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// webpack@4.44.2")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// webpack.config.js")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" path "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("require")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'path'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\nmodule"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("exports "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  entry"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'./src/index.js'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  output"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    filename"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'bundle.js'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    path"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" path"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("resolve")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("__dirname"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'dist'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  mode"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'development'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  optimization"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    usedExports"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("true")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 标记未使用（unused）的代码")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// src/math.js")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("export")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("square")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("x")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" x "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),t._v(" x"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("export")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("cube")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("x")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" x "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),t._v(" x "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),t._v(" x"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// src/index.js")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" cube "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'./math.js'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\nconsole"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'5 cubed is equal to '")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("cube")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("5")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),a("h3",{attrs:{id:"mode-为-development-时-tree-shaking-对模块的标记"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#mode-为-development-时-tree-shaking-对模块的标记"}},[t._v("#")]),t._v(" mode 为 development 时，tree-shaking 对模块的标记")]),t._v(" "),a("blockquote",[a("p",[t._v("打包出来的 bundle.js,其中可以看到标记的部分："),a("br"),t._v("\n/*! exports used: cube */"),a("br"),t._v("\n/*! all exports used */")])]),t._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/************************************************************************/")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/******/")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/***/")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'./tree-shaking/b.js'")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/*!***************************!*\\\n  !*** ./tree-shaking/b.js ***!\n  \\***************************/")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/*! exports provided: square, cube */")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/*! exports used: cube */")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/***/")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("module"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" __webpack_exports__"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" __webpack_require__")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'use strict'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("eval")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("\n          "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'/* unused harmony export square */\\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"a\", function() { return cube; });\\nfunction square(x) {\\n  return x * x;\\n}\\nfunction cube(x) {\\n  return x * x * x;\\n}\\n\\n\\n//# sourceURL=webpack:///./tree-shaking/b.js?'")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n        "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/***/")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/***/")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'./tree-shaking/c.js'")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/*!***************************!*\\\n  !*** ./tree-shaking/c.js ***!\n  \\***************************/")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/*! no exports provided */")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/*! all exports used */")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/***/")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("module"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" __webpack_exports__"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" __webpack_require__")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'use strict'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("eval")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("\n          "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'__webpack_require__.r(__webpack_exports__);\\n/* harmony import */ var _b_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./b.js */ \"./tree-shaking/b.js\");\\n\\nconsole.log(\\'5 cubed is equal to \\' + Object(_b_js__WEBPACK_IMPORTED_MODULE_0__[/* cube */ \"a\"])(5));\\n\\n\\n//# sourceURL=webpack:///./tree-shaking/c.js?'")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n        "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/***/")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/******/")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),a("h3",{attrs:{id:"mode-为-none-时-tree-shaking-对模块的标记"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#mode-为-none-时-tree-shaking-对模块的标记"}},[t._v("#")]),t._v(" mode 为 none 时，tree-shaking 对模块的标记")]),t._v(" "),a("blockquote",[a("p",[t._v("打包出来的 bundle.js,其中可以看到标记的部分："),a("br"),t._v("\n/* unused harmony export square */")])]),t._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/************************************************************************/")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/******/")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/* 0 */")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/***/")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("module"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" __webpack_exports__"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" __webpack_require__")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'use strict'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    __webpack_require__"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("r")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("__webpack_exports__"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/* harmony import */")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("var")]),t._v(" _b_js__WEBPACK_IMPORTED_MODULE_0__ "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("__webpack_require__")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n    console"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'5 cubed is equal to '")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("Object")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("_b_js__WEBPACK_IMPORTED_MODULE_0__"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/* cube */")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'a'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("5")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/***/")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/* 1 */")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/***/")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("module"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" __webpack_exports__"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" __webpack_require__")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'use strict'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/* unused harmony export square */")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/* harmony export (binding) */")]),t._v(" __webpack_require__"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("d")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("__webpack_exports__"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'a'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" cube"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("square")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("x")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" x "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),t._v(" x"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("cube")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("x")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" x "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),t._v(" x "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),t._v(" x"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/***/")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/******/")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),a("h3",{attrs:{id:"mode-为-production-时"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#mode-为-production-时"}},[t._v("#")]),t._v(" mode 为 production 时")]),t._v(" "),a("p",[t._v("可以看到代码已经被压缩了，且删除了无用代码，只保留了 "),a("code",[t._v("index.js")]),t._v(" 和 "),a("code",[t._v("cube")]),t._v(" 的代码。")]),t._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("e"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("t"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("r")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"use strict"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("var")]),t._v(" n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("r"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("r")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("t"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("console"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"5 cubed is equal to "')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("n"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("5")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),t._v("n"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),t._v("n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),a("p",[t._v("至于 webpack2-3 版本的 "),a("code",[t._v("tree-shaking")]),t._v(" 效果，不再继续展示了，有兴趣的可以自己试验一下。")]),t._v(" "),a("h1",{attrs:{id:"总结"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#总结"}},[t._v("#")]),t._v(" 总结")]),t._v(" "),a("p",[t._v("使用 "),a("code",[t._v("tree-shaking")]),t._v(" 需要：")]),t._v(" "),a("ul",[a("li",[t._v("1、使用 ES6 模块语法，这样 webpack 能够标记出来未使用的代码（dead-code）,")]),t._v(" "),a("li",[t._v("2、使用 "),a("code",[t._v("uglifyjs-webpack-plugin")]),t._v(" 这样的压缩工具来删除 "),a("code",[t._v("tree-shaking")]),t._v(" 标记出来的无用代码。(webpack4 可以使用 mode 选项开启默认优化)")])]),t._v(" "),a("p",[t._v("更多细节和注意事项，请阅读文末的参考资料。")]),t._v(" "),a("p",[t._v("参考资料：")]),t._v(" "),a("ol",[a("li",[a("a",{attrs:{href:"https://v4.webpack.js.org/guides/tree-shaking/",target:"_blank",rel:"noopener noreferrer"}},[t._v("webpack4 文档：https://v4.webpack.js.org/guides/tree-shaking/"),a("OutboundLink")],1)]),t._v(" "),a("li",[a("a",{attrs:{href:"https://www.zhihu.com/question/41922432",target:"_blank",rel:"noopener noreferrer"}},[t._v("如何评价 Webpack 2 新引入的 Tree-shaking 代码优化技术？"),a("OutboundLink")],1),t._v("："),a("a",{attrs:{href:"https://www.zhihu.com/question/41922432",target:"_blank",rel:"noopener noreferrer"}},[t._v("https://www.zhihu.com/question/41922432"),a("OutboundLink")],1)]),t._v(" "),a("li",[a("a",{attrs:{href:"https://github.com/wuomzfx/tree-shaking-test",target:"_blank",rel:"noopener noreferrer"}},[t._v("你的 Tree-Shaking 并没什么卵用"),a("OutboundLink")],1),t._v("："),a("a",{attrs:{href:"https://github.com/wuomzfx/tree-shaking-test",target:"_blank",rel:"noopener noreferrer"}},[t._v("https://github.com/wuomzfx/tree-shaking-test"),a("OutboundLink")],1)]),t._v(" "),a("li",[a("a",{attrs:{href:"https://juejin.cn/post/6844903544756109319",target:"_blank",rel:"noopener noreferrer"}},[t._v("Tree-Shaking 性能优化实践 - 原理篇"),a("OutboundLink")],1),t._v("："),a("a",{attrs:{href:"https://juejin.cn/post/6844903544756109319",target:"_blank",rel:"noopener noreferrer"}},[t._v("https://juejin.cn/post/6844903544756109319"),a("OutboundLink")],1)]),t._v(" "),a("li",[a("a",{attrs:{href:"https://zhuanlan.zhihu.com/p/40052192",target:"_blank",rel:"noopener noreferrer"}},[t._v("Webpack 中的 sideEffects 到底该怎么用？"),a("OutboundLink")],1),t._v("："),a("a",{attrs:{href:"https://zhuanlan.zhihu.com/p/40052192",target:"_blank",rel:"noopener noreferrer"}},[t._v("https://zhuanlan.zhihu.com/p/40052192"),a("OutboundLink")],1)]),t._v(" "),a("li",[a("a",{attrs:{href:"https://zhuanlan.zhihu.com/p/44053307",target:"_blank",rel:"noopener noreferrer"}},[t._v("webpack sideEffect 观察"),a("OutboundLink")],1),t._v("："),a("a",{attrs:{href:"https://zhuanlan.zhihu.com/p/44053307",target:"_blank",rel:"noopener noreferrer"}},[t._v("https://zhuanlan.zhihu.com/p/44053307"),a("OutboundLink")],1)])])])}),[],!1,null,null,null);s.default=e.exports}}]);